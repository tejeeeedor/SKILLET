<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fechas de Gira - Skillet</title>
    <title>Fechas de Gira - Skillet</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    
    <style>
        /* --- 1. FUENTES Y ESTILO GENERAL (TEMA ROCKBAND) --- */
        @import url('https://fonts.googleapis.com/css2?family=Teko:wght@400;600&family=Roboto:wght@400;700&display=swap');

        /* --- 1. FUENTES Y ESTILO GENERAL (TEMA ROCKBAND) --- */
        @import url('https://fonts.googleapis.com/css2?family=Teko:wght@400;600&family=Roboto:wght@400;700&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        /* ================================================= */
        /* === AÑADIDOS CSS PARA ESTILO ORGÁNICO / NO-IA === */
        /* ================================================= */

        /* 1. TEXTURA DE FONDO (FONDO DE LADRILLO A TODA LA PÁGINA) */
        /* ================================================= */
        /* === AÑADIDOS CSS PARA ESTILO ORGÁNICO / NO-IA === */
        /* ================================================= */

        /* 1. TEXTURA DE FONDO (FONDO DE LADRILLO A TODA LA PÁGINA) */
        body {
            background-image: url('https://i.pinimg.com/originals/9a/6f/fd/9a6ffd67ac28aa3299eb24d3c7cfa34e.jpg');
            background-repeat: repeat;
            background-size: cover;
            background-attachment: fixed;
            background-color: #111;
            color: #cccccc;
            font-family: 'Roboto', sans-serif;
            background-image: url('https://i.pinimg.com/originals/9a/6f/fd/9a6ffd67ac28aa3299eb24d3c7cfa34e.jpg');
            background-repeat: repeat;
            background-size: cover;
            background-attachment: fixed;
            background-color: #111;
            color: #cccccc;
            font-family: 'Roboto', sans-serif;
            line-height: 1.6;
        }

        /* 2. CONTENEDOR PRINCIPAL: Añadimos un fondo oscuro semitransparente para legibilidad */

        /* 2. CONTENEDOR PRINCIPAL: Añadimos un fondo oscuro semitransparente para legibilidad */
        .container {
            max-width: 1100px;
            max-width: 1100px;
            margin: 0 auto;
            padding: 0 20px;
            background-color: rgba(18, 18, 20, 0.85); 
            box-shadow: 0 0 50px rgba(0,0,0,0.8);
            background-color: rgba(18, 18, 20, 0.85); 
            box-shadow: 0 0 50px rgba(0,0,0,0.8);
        }

        /* 3. HEADER: Mantenemos el estilo agresivo */

        /* 3. HEADER: Mantenemos el estilo agresivo */
        header {
            background: linear-gradient(to bottom, #5a0b0b, #380202); 
            border-bottom: 5px solid #e10600; 
            background: linear-gradient(to bottom, #5a0b0b, #380202); 
            border-bottom: 5px solid #e10600; 
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 8px 15px rgba(0,0,0,0.8); 
            box-shadow: 0 8px 15px rgba(0,0,0,0.8); 
        }
        
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 70px;
            height: 70px;
        }
        
        .logo {
            font-family: 'Teko', sans-serif;
            font-size: 38px;
            font-weight: 600;
            color: #e0e0e0;
            font-family: 'Teko', sans-serif;
            font-size: 38px;
            font-weight: 600;
            color: #e0e0e0;
            text-transform: uppercase;
            letter-spacing: 2px;
            text-shadow: 2px 2px 0px rgba(0,0,0,0.5);
            -webkit-background-clip: text;
            background-clip: text;
            background-image: linear-gradient(180deg, #fff 0%, #ccc 80%, #aaa 100%);
            color: transparent;
            text-shadow: 1px 1px 0px #000, 2px 2px 0px #e10600;
            text-shadow: 2px 2px 0px rgba(0,0,0,0.5);
            -webkit-background-clip: text;
            background-clip: text;
            background-image: linear-gradient(180deg, #fff 0%, #ccc 80%, #aaa 100%);
            color: transparent;
            text-shadow: 1px 1px 0px #000, 2px 2px 0px #e10600;
        }
        
        .nav-links {
            display: flex;
            list-style: none;
            height: 100%;
            align-items: center;
            height: 100%;
            align-items: center;
        }
        
        .nav-links li {
            height: 100%;
            display: flex;
            align-items: center;
            height: 100%;
            display: flex;
            align-items: center;
        }
        
        .nav-links a {
            color: #d1d1d1;
            color: #d1d1d1;
            text-decoration: none;
            font-size: 14px;
            font-weight: 700;
            text-transform: uppercase;
            padding: 0 20px;
            height: 100%;
            display: flex;
            align-items: center;
            transition: all 0.3s;
            border-right: 1px solid rgba(255,255,255,0.05);
            cursor: pointer;
            font-size: 14px;
            font-weight: 700;
            text-transform: uppercase;
            padding: 0 20px;
            height: 100%;
            display: flex;
            align-items: center;
            transition: all 0.3s;
            border-right: 1px solid rgba(255,255,255,0.05);
            cursor: pointer;
        }
        
        .nav-links a:hover {
            color: #fff;
            background-color: #380202 !important; 
            border-bottom: 3px solid #e10600;
        }
        
        /* Contador del Carrito - Lo ocultamos en esta versión simplificada */
        .cart-count { display: none; }

        .cart-item {
            /* Adaptamos el grid para mostrar: Nombre | Controles de Cantidad | Subtotal */
            display: grid;
            grid-template-columns: 1fr auto auto; 
            gap: 10px;
            padding: 15px 0;
            border-bottom: 1px dotted #333;
            align-items: center;
        }

        #floating-cart {
            position: fixed;
            top: 0;
            right: -400px; /* <--- Esto lo oculta fuera de pantalla al inicio */
            width: 380px;
            height: 100%;
            background-color: #1a1a1a;
            box-shadow: -5px 0 15px rgba(0, 0, 0, 0.5);
            z-index: 1000;
            padding: 20px;
            overflow-y: auto;
            transition: right 0.4s ease-in-out;
            border-left: 5px solid #e10600;
        }

        #floating-cart.open {
            right: 0; /* <--- Esto lo hace visible con JS */
        }

        /* Para que el formulario de checkout esté oculto al inicio (si no lo está ya) */
        #checkout-form {
            display: none;
        }

        .item-details h4 {
            color: white;
            font-size: 1em;
            margin: 0;
        }

        .item-details p {
            color: #e10600;
            font-weight: bold;
            font-size: 0.9em;
        }

        /* Controles de Cantidad para entradas */
        .quantity-controls {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .qty-btn {
            background-color: #333;
            color: white;
            border: none;
            width: 25px;
            height: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.2s;
        }

        .qty-btn:hover {
            background-color: #e10600;
        }

        .item-quantity {
            width: 20px;
            text-align: center;
            color: #fff;
        }
        
        .remove-btn {
            background: none;
            border: none;
            color: #999;
            font-size: 1em;
            cursor: pointer;
            transition: color 0.2s;
            margin-left: 10px;
        }
        .remove-btn:hover {
            color: #e10600;
        }


        section {
            padding: 80px 0;
        }

        h2 {
            font-family: 'Teko', sans-serif;
            color: #e0e0e0;
            font-size: 3.5em;
            margin-bottom: 50px;
            font-weight: 400;
            letter-spacing: 1px;
            padding-bottom: 15px;
            text-align: center;
            transform: skewX(-5deg); 
            padding-left: 15px;
            border-left: 8px solid #e10600;
            border-bottom: none !important;
        }
        
        /* --- ESTILOS DE LA TABLA DE GIRA --- */
        
        .tour-dates-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 30px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.5);
        }

        .tour-dates-table thead tr {
            background-color: #e10600;
            color: white;
            text-transform: uppercase;
            font-family: 'Teko', sans-serif;
            font-size: 1.5em;
            transform: skewX(-2deg); 
            box-shadow: 0 5px 10px rgba(0,0,0,0.5);
        }

        .tour-dates-table th, .tour-dates-table td {
            padding: 15px;
            text-align: left;
        }
        
        .tour-dates-table tbody tr {
            background-color: #1a1b1e;
            border-bottom: 1px solid #333;
            transition: background-color 0.2s;
        }

        .tour-dates-table tbody tr:hover {
            background-color: #222326;
        }

        /* Columna de fecha más destacada */
        .tour-dates-table td:first-child {
            font-weight: 700;
            color: #fff;
            font-size: 1.1em;
            border-left: 5px solid #e10600;
        }
        
        /* Estilo para el botón de Entradas (Comprar, ya no es un carrito) */
       /* --- ESTILO PARA EL INPUT DE TICKETS EN LA TABLA --- */
        .ticket-input-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .ticket-input-group input {
            width: 50px;
            padding: 8px;
            text-align: center;
            border: 1px solid #e10600;
            background-color: #1a1b1e;
            color: #fff;
            border-radius: 0;
        }
        
        /* Estilo para el botón de Entradas (Añadir) */
        .add-ticket-btn {
            background-color: #e10600;
            color: white;
            padding: 8px 15px;
            text-decoration: none;
            text-transform: uppercase;
            font-weight: 700;
            font-size: 1em; /* Un poco más grande y robusto */
            border: none;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 4px 0 #8a0400; /* Efecto 3D de "empuje" */
        }

        .add-ticket-btn:hover {
            background-color: #ff3300;
            transform: translateY(-2px);
            box-shadow: 0 6px 0 #8a0400;
        }
        .add-ticket-btn:active {
            transform: translateY(2px); 
            box-shadow: 0 2px 0 #8a0400; /* Efecto de "pulsado" */
        }
        
        /* Botones del Carrito y Pago Final (Asegurar que tienen el mismo estilo) */
        .checkout-btn, .confirm-payment-btn {
            width: 100%;
            padding: 15px;
            background-color: #e10600;
            color: white;
            border: none;
            text-transform: uppercase;
            font-size: 1.3em;
            font-family: 'Teko', sans-serif;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 5px 0 #8a0400; /* Estilo de botón "pulsable" */
        }
        
        .checkout-btn:hover, .confirm-payment-btn:hover {
            background-color: #ff3300;
            transform: translateY(-2px);
            box-shadow: 0 7px 0 #8a0400;
        }
        .checkout-btn:active, .confirm-payment-btn:active {
            transform: translateY(3px);
            box-shadow: 0 2px 0 #8a0400;
        }

        /* --- MENSAJE INFORMATIVO / CALL TO ACTION --- */
        .tour-info {
            background-color: #380202; 
            padding: 30px;
            margin-top: 50px;
            text-align: center;
            border: 2px solid #e10600;
            color: white; 
        }
        
        .tour-info h3 {
            font-family: 'Teko', sans-serif;
            font-size: 2.5em;
            color: white;
            margin-bottom: 5px;
        }
        
        .tour-info p {
            font-size: 1.1em;
            color: white;
            margin-bottom: 20px;
        }
        
        .mailing-list-btn {
            background-color: #fff;
            color: #e10600;
            padding: 12px 30px;
            text-decoration: none;
            text-transform: uppercase;
            font-weight: 700;
            font-size: 1.1em;
            transition: all 0.3s;
        }
        
        .mailing-list-btn:hover {
            background-color: #eee;
            color: #a00500;
        }
        
        /* Ocultamos el carrito flotante y las secciones de pago que ya no se usan */
     


        /* --- FOOTER --- */
        footer {
            background-color: #0a0a0a;
            padding: 40px 0;
            background-color: #0a0a0a;
            padding: 40px 0;
            text-align: center;
            border-top: 5px solid #222;
            margin-top: 80px;
            border-top: 5px solid #222;
            margin-top: 80px;
        }


        .copyright {
            color: #555;
            font-size: 0.8rem;
            text-transform: uppercase;
            color: #555;
            font-size: 0.8rem;
            text-transform: uppercase;
        }

        /* Responsive */
        /* Responsive */
        @media (max-width: 768px) {
            .navbar {
                flex-direction: column;
                height: auto;
                padding: 15px 0;
                height: auto;
                padding: 15px 0;
            }
            .nav-links {
            .nav-links {
                flex-direction: column;
                margin-top: 15px;
            }
            .nav-links a {
                border-right: none;
                border-bottom: 1px solid #333;
                width: 100%;
                justify-content: center;
                padding: 10px;
            }
            
            .tour-dates-table th, .tour-dates-table td {
                padding: 10px 5px;
                font-size: 0.9em;
            }
            
            /* Ocultar algunas columnas en móvil para que quepa */
            .tour-dates-table th:nth-child(3), 
            .tour-dates-table td:nth-child(3) {
                display: none;
                margin-top: 15px;
            }
            .nav-links a {
                border-right: none;
                border-bottom: 1px solid #333;
                width: 100%;
                justify-content: center;
                padding: 10px;
            }
            
            .tour-dates-table th, .tour-dates-table td {
                padding: 10px 5px;
                font-size: 0.9em;
            }
            
            /* Ocultar algunas columnas en móvil para que quepa */
            .tour-dates-table th:nth-child(3), 
            .tour-dates-table td:nth-child(3) {
                display: none;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <nav class="navbar">
                <div class="logo">SKILLET</div>
                <ul class="nav-links">
                    <li><a href="index.html">Inicio</a></li>
                    <li><a href="miembros.html">Miembros</a></li>
                    <li><a href="index.html">Inicio</a></li>
                    <li><a href="miembros.html">Miembros</a></li>
                    <li><a href="gira.html">Gira</a></li>
                    <li><a href="galeria.html">Galería</a></li> 
                    <li><a href="discografia.html">Discografía</a></li>
                    <li><a href="tienda.html">Tienda</a></li>
                    <li><a href="galeria.html">Galería</a></li> 
                    <li><a href="discografia.html">Discografía</a></li>
                    <li><a href="tienda.html">Tienda</a></li>
                    <li><a href="index.html#contact">Contacto</a></li>

                    <li style="margin-left: 20px;">
                        <a onclick="toggleCart()">
                            Carrito 
                            <i class="fa-solid fa-cart-shopping"></i> 
                            <span id="cart-count" class="cart-count">0</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </header>
    <section id="tour-list-section">
        <div class="container">
            <h2><i class="fa-solid fa-calendar-alt"></i> Próximas Fechas de Gira</h2>
            
            <table class="tour-dates-table">
    <thead>
        <tr>
            <th>Fecha</th>
            <th>Ciudad</th>
            <th>Recinto</th>
            <th>Entradas</th>
        </tr>
    </thead>
    <tbody id="tour-dates-body">
        </tbody>
</table>
            
            
            <div class="tour-info">
                <h3>¡LA Nueva Era del Rock ha llegado!</h3>
                <p>Prepárate para la Experiencia Skillet</p>
                <a id="join-list" class="mailing-list-btn">
                    <i class="fa-solid fa-envelope"></i> Unirse a la Lista de Correo
                </a>
            </div>
            
        </div>
    </section>

    <div id="floating-cart">
        <div class="cart-header">
            <h3>Tu Carrito de Entradas</h3>
            <button class="close-btn" onclick="toggleCart()"><i class="fa-solid fa-times"></i></button>
        </div>

        <div id="cart-items-container">
            </div>

        <div class="cart-footer">
            <div class="cart-total">
                <span>Total:</span>
                <span id="cart-total-price">0.00€</span>
            </div>
            <button class="checkout-btn">Proceder al Pago</button>
        </div>
    </div>
    
    <section id="checkout-form" class="checkout-section">
        <div class="container">
            <h2>Pago Seguro <i class="fa-solid fa-lock"></i></h2>

            <div class="checkout-grid">
                <div class="checkout-details">
                    <h3>1. Información de Envío/Contacto</h3>
                    <div class="form-group">
                        <label for="email">Email</label>
                        <input type="email" id="email" required placeholder="tu.email@ejemplo.com">
                    </div>
                    <div class="form-group">
                        <label for="nombre">Nombre Completo</label>
                        <input type="text" id="nombre" required placeholder="John Cooper">
                    </div>
                    <div class="form-group">
                        <label for="direccion">Dirección</label>
                        <input type="text" id="direccion" required placeholder="C/ del Rock, 123">
                    </div>
                    <div class="form-group-half">
                        <div class="form-group">
                            <label for="ciudad">Ciudad</label>
                            <input type="text" id="ciudad" required placeholder="Memphis">
                        </div>
                        <div class="form-group">
                            <label for="postal">Código Postal</label>
                            <input type="text" id="postal" required placeholder="00000">
                        </div>
                    </div>
                </div>

                <div class="checkout-summary">
                    <h3>2. Detalles de Pago</h3>
                    <div class="form-group">
                        <label for="card-number">Número de Tarjeta</label>
                        <input type="text" id="card-number" required placeholder="XXXX XXXX XXXX XXXX" maxlength="16">
                    </div>
                    <div class="form-group-half">
                        <div class="form-group">
                            <label for="expiry">Fecha de Caducidad</label>
                            <input type="text" id="expiry" required placeholder="MM/AA" maxlength="5">
                        </div>
                        <div class="form-group">
                            <label for="cvv">CVV</label>
                            <input type="text" id="cvv" required placeholder="123" maxlength="3">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="name-on-card">Nombre en la Tarjeta</label>
                        <input type="text" id="name-on-card" required>
                    </div>
                    
                    <div class="payment-summary">
                        <h4>Resumen del Pedido</h4>
                        <div class="summary-line">
                            <span>Entradas Subtotal</span>
                            <span id="summary-subtotal">0.00€</span>
                        </div>
                        <div class="summary-line">
                            <span>Cargos de Servicio</span>
                            <span id="summary-shipping">5.00€</span>
                        </div>
                        <div class="summary-line summary-total">
                            <span>Total Final</span>
                            <span id="summary-final-total">0.00€</span>
                        </div>
                        <button class="confirm-payment-btn">
                            Pagar <span id="payment-amount">0.00€</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    
    <footer>
        <div class="container">
            <p class="copyright">© 2025 Skillet Fan Site. Todos los derechos reservados. | Diseñado para el rock.</p>
            <p class="copyright">© 2025 Skillet Fan Site. Todos los derechos reservados. | Diseñado para el rock.</p>
        </div>
    </footer>

    <script>
    // ------------------------------------------
    // JAVASCRIPT: LÓGICA DE ENTRADAS Y CARRITO
    // ------------------------------------------

    // 1. DATOS DE GIRA (JSON Simulado)
    const tourDates = [
        { id: 101, date: "25 MARZO 2026", city: "Ciudad de México, México", venue: "Auditorio Nacional", price: 45.00 },
        { id: 102, date: "01 ABRIL 2026", city: "Bogotá, Colombia", venue: "Movistar Arena", price: 50.00 },
        { id: 103, date: "08 MAYO 2026", city: "Madrid, España", venue: "Palacio Vistalegre", price: 55.00 },
        { id: 104, date: "12 MAYO 2026", city: "París, Francia", venue: "Le Bataclan", price: 60.00 },
        { id: 105, date: "16 JUNIO 2026", city: "Londres, Reino Unido", venue: "O2 Academy Brixton", price: 65.00 },
        { id: 106, date: "05 JULIO 2026", city: "Chicago, EE. UU.", venue: "Riot Fest", price: 75.00 },
        { id: 107, date: "20 AGOSTO 2026", city: "Tokio, Japón", venue: "Zepp DiverCity", price: 70.00 }
    ];

    // 2. ELEMENTOS DEL DOM y ESTRUCTURA DE CARRITO
    let cart = []; 
    const tourDatesBody = document.getElementById('tour-dates-body');
    const cartContainer = document.getElementById('cart-items-container');
    const cartCountDisplay = document.getElementById('cart-count');
    const cartTotalDisplay = document.getElementById('cart-total-price');
    const tourListSection = document.getElementById('tour-list-section');
    const checkoutForm = document.getElementById('checkout-form');
    const checkoutBtnInCart = document.querySelector('#floating-cart .checkout-btn');
    const serviceFee = 5.00; 
    
    // Verificamos que todos los elementos DOM estén presentes
    if (!tourDatesBody || !cartContainer || !checkoutForm) {
        console.error("Error: Faltan elementos DOM esenciales (tour-dates-body, cart-items-container o checkout-form) para iniciar el carrito.");
    }


    // 3. FUNCIÓN PARA DIBUJAR LAS FECHAS CON INPUTS DE CANTIDAD
    function renderTourDates() {
        tourDatesBody.innerHTML = '';
        tourDates.forEach(event => {
            const row = `
                <tr>
                    <td>${event.date}</td>
                    <td>${event.city}</td>
                    <td>${event.venue}</td>
                    <td>
                        <div class="ticket-input-group">
                            <input type="number" 
                                   id="input-${event.id}"
                                   class="ticket-input" 
                                   min="1" 
                                   value="1">
                            <button class="add-ticket-btn" 
                                    onclick="addToCart(${event.id})">
                                <i class="fa-solid fa-cart-plus"></i> Añadir
                            </button>
                        </div>
                    </td>
                </tr>
            `;
            tourDatesBody.innerHTML += row;
        });
    }
    
    // 4. FUNCIÓN PARA ABRIR/CERRAR EL CARRITO
    function toggleCart() {
        document.getElementById('floating-cart').classList.toggle('open');
    }

    // 5. FUNCIÓN CENTRAL: AÑADIR ENTRADAS AL CARRITO
    function addToCart(eventId) {
        const inputElement = document.getElementById(`input-${eventId}`);
        const quantity = parseInt(inputElement.value);

        if (quantity <= 0 || isNaN(quantity)) {
            alert('Por favor, selecciona al menos 1 entrada.');
            return;
        }

        const eventData = tourDates.find(e => e.id === eventId);
        if (!eventData) return;

        const cartItemIndex = cart.findIndex(item => item.id === eventId);

        if (cartItemIndex > -1) {
            cart[cartItemIndex].cantidad += quantity;
        } else {
            cart.push({
                id: eventId,
                name: `${eventData.city} (${eventData.date})`,
                price: eventData.price,
                cantidad: quantity
            });
        }
        
        inputElement.value = 1;

        renderCart();
        
        if (!document.getElementById('floating-cart').classList.contains('open')) {
            toggleCart();
        }
    }

    // 6. MODIFICAR CANTIDAD DESDE EL CARRITO FLOTANTE (CLAVE)
    function changeQuantity(eventId, change) {
        const item = cart.find(i => i.id === eventId);
        if (!item) return;

        item.cantidad += change;

        if (item.cantidad <= 0) {
            removeFromCart(eventId);
        } else {
            renderCart();
        }
    }
    
    // 7. ELIMINAR ÍTEM DEL CARRITO
    function removeFromCart(eventId) {
        cart = cart.filter(item => item.id !== eventId);
        renderCart();
    }

    // 8. FUNCIÓN PARA DIBUJAR LOS ITEMS DENTRO DEL CARRITO (ACTUALIZADA con botones)
    function renderCart() {
        let total = 0;
        let totalTickets = 0;
        cartContainer.innerHTML = '';

        if (cart.length === 0) {
            cartContainer.innerHTML = '<p id="empty-cart-message">El carrito está vacío. ¡Selecciona tus entradas!</p>';
            checkoutBtnInCart.disabled = true;
        } else {
            checkoutBtnInCart.disabled = false;
            cart.forEach((item) => {
                const subtotal = item.price * item.cantidad;
                total += subtotal;
                totalTickets += item.cantidad;

                const itemHtml = `
                    <div class="cart-item">
                        <div class="item-details">
                            <h4>${item.name}</h4>
                            <p>${item.price.toFixed(2)}€ / entrada</p>
                        </div>
                        <div class="quantity-controls">
                            <button class="qty-btn" onclick="changeQuantity(${item.id}, -1)">-</button>
                            <span class="item-quantity">${item.cantidad}</span>
                            <button class="qty-btn" onclick="changeQuantity(${item.id}, 1)">+</button>
                            <button class="remove-btn" onclick="removeFromCart(${item.id})" title="Eliminar ítem">
                                <i class="fa-solid fa-trash"></i>
                            </button>
                        </div>
                        <strong>${subtotal.toFixed(2)}€</strong>
                    </div>
                `;
                cartContainer.innerHTML += itemHtml;
            });
        }

        // Actualizar el contador en el Header y el Total final del CARRITO FLOTANTE
        if (cartCountDisplay) cartCountDisplay.textContent = totalTickets;
        if (cartTotalDisplay) cartTotalDisplay.textContent = total.toFixed(2) + '€';

        // Actualizar el Resumen del formulario de Pago Final
        const totalConEnvio = total > 0 ? total + serviceFee : 0; 
        if (document.getElementById('summary-subtotal')) document.getElementById('summary-subtotal').textContent = total.toFixed(2) + '€';
        if (document.getElementById('summary-shipping')) document.getElementById('summary-shipping').textContent = serviceFee.toFixed(2) + '€';
        if (document.getElementById('summary-final-total')) document.getElementById('summary-final-total').textContent = totalConEnvio.toFixed(2) + '€';
        if (document.getElementById('payment-amount')) document.getElementById('payment-amount').textContent = totalConEnvio.toFixed(2) + '€';
    }
    
    // 9. FUNCIÓN PARA IR AL PAGO FINAL (DEL CARRITO AL FORMULARIO)
    function goToCheckout() {
        if (cart.length === 0) return;

        toggleCart(); 
        tourListSection.style.display = 'none'; 
        checkoutForm.style.display = 'block';

        window.scrollTo(0, 0); 
    }

    // 10. FUNCIÓN FINAL: COMPLETAR LA COMPRA (Se mantiene la simulación)
    function completePurchase() {
        const requiredInputs = document.querySelectorAll('#checkout-form input[required]');
        let allValid = true;

        requiredInputs.forEach(input => {
            if (!input.value) {
                allValid = false;
                input.style.border = '2px solid yellow';
            } else {
                input.style.border = ''; 
            }
        });
        
        if (!allValid) {
            alert('Por favor, rellena todos los campos requeridos para continuar.');
            return;
        }

        checkoutForm.style.display = 'none';

        const finalTotal = document.getElementById('summary-final-total').textContent; 
        cart = [];
        renderCart();
        
        // Mostramos la confirmación de compra
        document.body.insertAdjacentHTML('beforeend', `
            <div id="confirmation-overlay" style="
                position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
                background-color: rgba(18, 18, 20, 0.95); z-index: 2000;
                display: flex; justify-content: center; align-items: center;
            ">
                <div style="
                    background-color: #1a1b1e; border: 5px solid #e10600; 
                    padding: 50px; text-align: center; max-width: 500px;
                    box-shadow: 0 0 40px rgba(225, 6, 0, 0.5);
                    transform: skewX(-1deg);
                ">
                    <i class="fa-solid fa-check-circle" style="font-size: 5em; color: #1DB954; margin-bottom: 20px;"></i>
                    <h3 style="font-family: 'Teko', sans-serif; font-size: 3em; color: #fff; margin-bottom: 10px;">¡PAGO EXITOSO!</h3>
                    <p style="font-size: 1.2em; color: #ccc;">Has pagado ${finalTotal} y tus entradas han sido enviadas a tu correo electrónico.</p>
                    <p style="font-size: 1em; color: #e10600; margin-top: 20px;">¡Gracias por unirte a la Experiencia Skillet!</p>
                    <button onclick="document.getElementById('confirmation-overlay').remove(); tourListSection.style.display = 'block';" 
                            style="
                            background-color: #e10600; color: white; border: none; padding: 10px 20px; 
                            margin-top: 30px; font-weight: bold; cursor: pointer; text-transform: uppercase;
                            font-family: 'Teko', sans-serif; font-size: 1.2em;
                            ">
                        Volver a Fechas
                    </button>
                </div>
            </div>
        `);
    }


    // 11. INICIAR LA PÁGINA Y ASIGNACIÓN DE EVENTOS
    document.addEventListener('DOMContentLoaded', (event) => {
        const confirmPaymentBtn = document.querySelector('.confirm-payment-btn'); 
        
        if (confirmPaymentBtn) {
            confirmPaymentBtn.addEventListener('click', completePurchase);
        }
    });

    // Iniciar
    renderTourDates();
    renderCart(); 
    
    // Conectamos el botón de 'Proceder al Pago' en el carrito al JavaScript
    if (checkoutBtnInCart) {
        checkoutBtnInCart.addEventListener('click', goToCheckout);
    }

</script>
</body>
</html>