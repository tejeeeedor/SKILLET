<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gira y Entradas - Skillet</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Estilos generales (Mantener consistencia) */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #0a0a0a;
            color: #f0f0f0;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        section {
            padding: 60px 0;
        }
        
        h2 {
            color: #e10600;
            margin-bottom: 20px;
        }
        
        /* Header */
        header {
            background-color: #111;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
        }
        
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
        }
        
        .logo {
            font-size: 28px;
            font-weight: bold;
            color: #e10600;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        
        .nav-links {
            display: flex;
            list-style: none;
        }
        
        .nav-links li {
            margin-left: 30px;
        }
        
        .nav-links a {
            color: #f0f0f0;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
        }
        
        .nav-links a:hover {
            color: #e10600;
        }

        /* Tour Section */
        .tour-schedule {
            min-height: 80vh;
            padding: 80px 0;
        }

        .tour-schedule h2 {
            text-align: center;
            font-size: 3em;
            margin-bottom: 40px;
            border-bottom: 3px solid #e10600;
            display: inline-block;
            padding-bottom: 10px;
            letter-spacing: 1px;
        }

        .tour-list {
            list-style: none;
            padding: 0;
        }

        .tour-item {
            padding: 30px;
            margin-bottom: 30px;
            background-color: #1a1a1a;
            border-left: 5px solid #e10600;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .tour-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .tour-header .location {
            font-size: 2em;
            color: #e10600;
        }
        
        .tour-header .date {
            font-weight: bold;
            font-size: 1.2em;
            color: #f0f0f0;
        }

        .tour-controls {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
            border-top: 1px solid #333;
            padding-top: 20px;
        }

        .control-group {
            padding: 15px;
            border: 1px solid #333;
            border-radius: 5px;
        }

        .control-group label {
            display: block;
            margin-bottom: 10px;
            font-weight: bold;
            color: #e10600;
            font-size: 1.1em;
        }

        /* Cantidad */
        .quantity-control {
            display: flex;
            align-items: center;
            justify-content: space-between;
            max-width: 150px;
            margin-bottom: 15px;
        }
        
        .quantity-btn {
            background-color: #e10600;
            color: white;
            border: none;
            padding: 8px 15px;
            font-size: 1.1em;
            cursor: pointer;
            border-radius: 4px;
            transition: background-color 0.2s;
        }

        .quantity-btn:hover {
            background-color: #ff3300;
        }

        .quantity-input {
            width: 40px;
            text-align: center;
            background-color: #0a0a0a;
            color: white;
            border: 1px solid #444;
            padding: 8px 0;
            border-radius: 4px;
        }
        
        /* Tipo de Entrada */
        .ticket-type-select {
            padding: 10px;
            border-radius: 4px;
            border: 1px solid #444;
            background-color: #111;
            color: #f0f0f0;
            width: 100%;
            cursor: pointer;
        }
        
        /* Pago y Precio */
        .purchase-info {
            grid-column: 1 / -1; /* Ocupa ambas columnas */
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
            padding: 15px;
            background-color: #0d0d0d;
            border: 2px solid #e10600;
            border-radius: 5px;
        }

        .total-price {
            font-size: 1.8em;
            font-weight: bold;
            color: #e10600;
        }

        .buy-btn {
            background-color: #e10600;
            color: white;
            border: none;
            padding: 12px 30px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            border-radius: 5px;
            transition: background-color 0.3s, transform 0.3s;
        }

        .buy-btn:hover {
            background-color: #ff3300;
            transform: translateY(-2px);
        }

        /* --- ESTILOS DE VOLVER (NUEVO) --- */
        .back-button-tour {
            display: inline-block;
            margin-bottom: 30px; /* Separación del título */
            text-decoration: none;
            color: #f0f0f0;
            background-color: #333;
            padding: 10px 15px;
            border-radius: 5px;
            transition: background-color 0.3s;
            font-weight: bold;
        }

        .back-button-tour:hover {
            background-color: #444;
            color: #e10600;
        }


        /* --- ESTILOS DE MODAL (Existentes) --- */
        .modal {
            display: none; 
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.8);
            padding-top: 60px;
        }

        .modal-content {
            background-color: #1a1a1a;
            margin: 5% auto; 
            padding: 30px;
            border: 2px solid #e10600;
            width: 90%;
            max-width: 500px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.6);
            position: relative;
        }

        .close-btn {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            line-height: 1;
        }

        .close-btn:hover,
        .close-btn:focus {
            color: #e10600;
            text-decoration: none;
            cursor: pointer;
        }
        
        /* Formulario de Pago */
        .payment-form input {
            width: 100%;
            padding: 10px;
            margin-bottom: 15px;
            border-radius: 5px;
            border: 1px solid #444;
            background-color: #0a0a0a;
            color: white;
        }

        .payment-form .pay-btn {
            width: 100%;
            margin-top: 10px;
            padding: 15px;
        }

        .payment-summary {
            margin-bottom: 20px;
            padding: 10px;
            background-color: #2a2a2a;
            border-left: 3px solid #e10600;
        }

        .payment-summary p {
            margin: 5px 0;
        }

        /* Confirmación */
        .confirmation-content {
            text-align: center;
        }

        .confirmation-content h3 {
            color: #5cb85c; 
            font-size: 2em;
            margin-bottom: 15px;
        }

        .confirmation-content i {
            color: #5cb85c;
            font-size: 4em;
            margin-bottom: 20px;
        }

        .confirmation-content .close-btn {
            float: none;
            display: block;
            margin-top: 20px;
            padding: 10px 20px;
            background-color: #333;
            color: white;
            border-radius: 5px;
            width: 100%;
        }
        .confirmation-content .close-btn:hover {
            background-color: #444;
        }


        /* Footer y Responsive (mantener) */
        footer {
            background-color: #111;
            padding: 20px 0;
            text-align: center;
            border-top: 1px solid #222;
        }
        
        .copyright {
            color: #777;
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            .navbar {
                flex-direction: column;
            }
            .tour-controls {
                grid-template-columns: 1fr;
            }
            .purchase-info {
                flex-direction: column;
                align-items: flex-start;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <nav class="navbar">
                <div class="logo">SKILLET</div>
                <ul class="nav-links">
                    <li><a href="index.html#about">Inicio</a></li>
                    <li><a href="index.html#members">Miembros</a></li>
                    <li><a href="gira.html">Gira</a></li>
                    <li><a href="index.html#discography">Discografía</a></li>
                    <li><a href="tienda.html" target="_blank">Tienda</a></li>
                    <li><a href="index.html#contact">Contacto</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <section id="tour" class="tour-schedule">
        <div class="container">
            <a href="index.html#about" class="back-button-tour">
                <i class="fa-solid fa-arrow-left"></i> Volver a la página principal
            </a>
            
            <h2 class="section-title">Próximas Fechas de Gira y Entradas</h2>
            <ul class="tour-list">
                
                <li class="tour-item" data-prices='{"normal": 55.00, "vip": 120.00, "especial": 85.00}'>
                    <div class="tour-header">
                        <div class="location">Ciudad de México, México</div>
                        <div class="date">15 de Marzo, 2026 - Palacio de los Deportes</div>
                    </div>
                    
                    <div class="tour-controls">
                        <div class="control-group">
                            <label for="ticket-type-1">Tipo de Entrada</label>
                            <select id="ticket-type-1" class="ticket-type-select" onchange="calculateTotal(1)">
                                <option value="normal">Normal (€55.00)</option>
                                <option value="especial">Especial (€85.00)</option>
                                <option value="vip">VIP (€120.00)</option>
                            </select>
                        </div>
                        
                        <div class="control-group">
                            <label>Cantidad</label>
                            <div class="quantity-control">
                                <button class="quantity-btn" onclick="updateQuantity(1, -1)">-</button>
                                <input type="number" id="quantity-1" class="quantity-input" value="1" min="1" readonly>
                                <button class="quantity-btn" onclick="updateQuantity(1, 1)">+</button>
                            </div>
                        </div>
                        
                        <div class="purchase-info">
                            <div class="total-price" id="total-price-1">€55.00</div>
                            <button class="buy-btn" onclick="openPaymentModal(1)">Comprar Entradas</button>
                        </div>
                    </div>
                </li>

                <li class="tour-item" data-prices='{"normal": 60.00, "vip": 150.00, "especial": 100.00}'>
                    <div class="tour-header">
                        <div class="location">Madrid, España</div>
                        <div class="date">3 de Abril, 2026 - WiZink Center</div>
                    </div>
                    
                    <div class="tour-controls">
                        <div class="control-group">
                            <label for="ticket-type-2">Tipo de Entrada</label>
                            <select id="ticket-type-2" class="ticket-type-select" onchange="calculateTotal(2)">
                                <option value="normal">Normal (€60.00)</option>
                                <option value="especial">Especial (€100.00)</option>
                                <option value="vip">VIP (€150.00)</option>
                            </select>
                        </div>
                        
                        <div class="control-group">
                            <label>Cantidad</label>
                            <div class="quantity-control">
                                <button class="quantity-btn" onclick="updateQuantity(2, -1)">-</button>
                                <input type="number" id="quantity-2" class="quantity-input" value="1" min="1" readonly>
                                <button class="quantity-btn" onclick="updateQuantity(2, 1)">+</button>
                            </div>
                        </div>
                        
                        <div class="purchase-info">
                            <div class="total-price" id="total-price-2">€60.00</div>
                            <button class="buy-btn" onclick="openPaymentModal(2)">Comprar Entradas</button>
                        </div>
                    </div>
                </li>
                
                <li class="tour-item" data-prices='{"normal": 45.00, "vip": 110.00, "especial": 70.00}'>
                    <div class="tour-header">
                        <div class="location">Buenos Aires, Argentina</div>
                        <div class="date">12 de Mayo, 2026 - Estadio Luna Park</div>
                    </div>
                    
                    <div class="tour-controls">
                        <div class="control-group">
                            <label for="ticket-type-3">Tipo de Entrada</label>
                            <select id="ticket-type-3" class="ticket-type-select" onchange="calculateTotal(3)">
                                <option value="normal">Normal (€45.00)</option>
                                <option value="especial">Especial (€70.00)</option>
                                <option value="vip">VIP (€110.00)</option>
                            </select>
                        </div>
                        
                        <div class="control-group">
                            <label>Cantidad</label>
                            <div class="quantity-control">
                                <button class="quantity-btn" onclick="updateQuantity(3, -1)">-</button>
                                <input type="number" id="quantity-3" class="quantity-input" value="1" min="1" readonly>
                                <button class="quantity-btn" onclick="updateQuantity(3, 1)">+</button>
                            </div>
                        </div>
                        
                        <div class="purchase-info">
                            <div class="total-price" id="total-price-3">€45.00</div>
                            <button class="buy-btn" onclick="openPaymentModal(3)">Comprar Entradas</button>
                        </div>
                    </div>
                </li>
                
            </ul>
        </div>
    </section>

    <footer>
        <div class="container">
            <p class="copyright">&copy; 2025 Skillet Fan Site. Todos los derechos reservados. | Diseñado con pasión.</p>
        </div>
    </footer>

    <div id="payment-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal('payment-modal')">&times;</span>
            <h2 style="color: white;">Procesar Pago</h2>
            
            <div class="payment-summary">
                <p>Concierto: <strong id="modal-location"></strong></p>
                <p>Tipo/Cantidad: <strong id="modal-details"></strong></p>
                <p>Total a Pagar: <strong id="modal-total" style="color: #e10600;"></strong></p>
            </div>

            <form id="payment-form" class="payment-form" onsubmit="processPayment(event)">
                <input type="text" placeholder="Nombre en la tarjeta" required>
                <input type="text" pattern="\d{16}" title="16 dígitos" placeholder="Número de Tarjeta (16 dígitos)" required>
                <input type="text" pattern="(0[1-9]|1[0-2])\/\d{2}" title="MM/AA" placeholder="Fecha de Vencimiento (MM/AA)" required>
                <input type="text" pattern="\d{3,4}" title="3 o 4 dígitos" placeholder="CVV" required>
                
                <button type="submit" class="buy-btn pay-btn">Pagar Ahora</button>
            </form>
        </div>
    </div>
    
    <div id="confirmation-modal" class="modal">
        <div class="modal-content confirmation-content">
            <i class="fa-solid fa-circle-check"></i>
            <h3>¡Compra Procesada Correctamente!</h3>
            <p>Se ha enviado un correo de confirmación con tus entradas a tu email registrado.</p>
            <p>¡Gracias por comprar con Skillet!</p>
            <button class="close-btn" onclick="closeModal('confirmation-modal')">Cerrar</button>
        </div>
    </div>

    <script>
        
        // --- FUNCIONES DE CONTROL DE PÁGINA EXISTENTES ---

        function updateQuantity(tourId, change) {
            const quantityInput = document.getElementById(`quantity-${tourId}`);
            let currentQuantity = parseInt(quantityInput.value);
            let newQuantity = currentQuantity + change;
            if (newQuantity < 1) { newQuantity = 1; }
            quantityInput.value = newQuantity;
            calculateTotal(tourId);
        }

        function calculateTotal(tourId) {
            const tourItem = document.querySelector(`.tour-item:nth-child(${tourId})`);
            const quantityInput = document.getElementById(`quantity-${tourId}`);
            const ticketSelect = document.getElementById(`ticket-type-${tourId}`);
            const totalPriceDisplay = document.getElementById(`total-price-${tourId}`);

            const pricesData = JSON.parse(tourItem.getAttribute('data-prices'));
            const selectedType = ticketSelect.value;
            const quantity = parseInt(quantityInput.value);
            
            let unitPrice = pricesData[selectedType];
            let totalPrice = unitPrice * quantity;

            totalPriceDisplay.textContent = `€${totalPrice.toFixed(2)}`;
        }
        
        document.addEventListener('DOMContentLoaded', () => {
            // Inicializar los precios de todos los conciertos al cargar la página
            calculateTotal(1);
            calculateTotal(2);
            calculateTotal(3);
        });
        
        // --- FUNCIONES DE MODAL (NUEVAS) ---

        /**
         * Abre la modal de pago e introduce los datos del concierto seleccionado.
         * @param {number} tourId - El ID del concierto (1, 2, 3, etc.).
         */
        function openPaymentModal(tourId) {
            const tourItem = document.querySelector(`.tour-item:nth-child(${tourId})`);
            const location = tourItem.querySelector('.location').textContent;
            
            // Obtener detalles de la compra actual
            const totalText = document.getElementById(`total-price-${tourId}`).textContent;
            const quantity = document.getElementById(`quantity-${tourId}`).value;
            const ticketType = document.getElementById(`ticket-type-${tourId}`).selectedOptions[0].text;
            
            if (parseInt(quantity) < 1) {
                alert("Por favor, selecciona al menos una entrada.");
                return;
            }

            // Llenar los campos de la modal
            document.getElementById('modal-location').textContent = location;
            document.getElementById('modal-details').textContent = `${ticketType} x ${quantity}`;
            document.getElementById('modal-total').textContent = totalText;
            
            // Guardar el ID del tour para usarlo en el proceso de pago
            document.getElementById('payment-form').setAttribute('data-tour-id', tourId);

            // Mostrar la modal de pago
            document.getElementById('payment-modal').style.display = 'block';
        }

        /**
         * Simula el proceso de pago al enviar el formulario.
         */
        function processPayment(event) {
            event.preventDefault(); // Evita que el formulario se envíe realmente
            
            // Validación de datos (simulada)
            const form = event.target;
            if (!form.checkValidity()) {
                // Si la validación falla (navegador), no hacemos nada
                return;
            }

            // SIMULACIÓN DE PAGO (Aquí iría la lógica real)
            setTimeout(() => {
                // 1. Cerrar la modal de pago
                closeModal('payment-modal');
                
                // 2. Mostrar la modal de confirmación
                document.getElementById('confirmation-modal').style.display = 'block';

            }, 1000); // Retraso de 1 segundo para simular procesamiento
        }

        /**
         * Cierra cualquier modal.
         * @param {string} modalId - El ID de la modal a cerrar.
         */
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        // Cierra la modal si el usuario hace clic fuera de ella
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.style.display = "none";
            }
        }
    </script>
</body>
</html>